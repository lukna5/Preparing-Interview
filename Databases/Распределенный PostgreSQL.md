# CAP
__–í CAP –≥–æ–≤–æ—Ä–∏—Ç—Å—è, —á—Ç–æ –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ 2 –∏–∑ 3-—Ö —Å–≤–æ–π—Å—Ç–≤:__

| –°–≤–æ–π—Å—Ç–≤–æ                    | –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞               | –û–ø–∏—Å–∞–Ω–∏–µ                                                             |
| --------------------------- | ------------------------- | -------------------------------------------------------------------- |
| **C** ‚Äî Consistency         | –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å           | –í—Å–µ —É–∑–ª—ã —Å–∏—Å—Ç–µ–º—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ                      |
| **A** ‚Äî Availability        | –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å               | –°–∏—Å—Ç–µ–º–∞ –≤—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã, –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ—è—Ö                   |
| **P** ‚Äî Partition tolerance | –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é | –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ —Å–µ—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ (—É–∑–ª—ã –Ω–µ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞) |
![](assets/–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π%20PostgreSQL/file-20250327104124602.png)

# –†–µ–ø–ª–∏–∫–∞—Ü–∏–∏

## –ò–¥–µ—è 
–†–µ–ø–ª–∏–∫–∞—Ü–∏—è –≤ PostgreSQL ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å _–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è_ –¥–∞–Ω–Ω—ã—Ö __—Å –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞__ (–º–∞—Å—Ç–µ—Ä/–ø–µ—Ä–≤–∏—á–Ω—ã–π/master) __–Ω–∞ –¥—Ä—É–≥–æ–π__ (—Ä–µ–ø–ª–∏–∫–∞/–≤—Ç–æ—Ä–∏—á–Ω—ã–π/slave/replica) —Å —Ü–µ–ª—å—é –ø–æ–≤—ã—à–µ–Ω–∏—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±—ç–∫–∞–ø–æ–≤ –∏ –∞–Ω–∞–ª–∏–∑–∞ –±–µ–∑ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä.

## –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è

1. **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å (High Availability):** –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä —É–ø–∞–ª ‚Äî –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ä–µ–ø–ª–∏–∫—É.
2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —á—Ç–µ–Ω–∏–µ (Read Scaling):** —á—Ç–µ–Ω–∏–µ –º–æ–∂–Ω–æ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Ä–µ–ø–ª–∏–∫–∏, –∞ –∑–∞–ø–∏—Å—å ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –º–∞—Å—Ç–µ—Ä–µ.
3. **–ë—ç–∫–∞–ø—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞:** –º–æ–∂–Ω–æ –Ω–µ –º–µ—à–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ, –≤—ã–ø–æ–ª–Ω—è—è —Ç—è–∂–µ–ª—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Ä–µ–ø–ª–∏–∫–µ.

# –§–∏–∑–∏—á–µ—Å–∫–∞—è (–ø–æ—Ç–æ–∫–æ–≤–∞—è) —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è

__–í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –Ω–∞ –º–∞—Å—Ç–µ—Ä-—Å–µ—Ä–≤–µ—Ä–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∂—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π (WAL) –≤ –ø–æ—Ç–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ –Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π__.
__–†–µ–ø–ª–∏–∫–∞ ‚Äî —Ç–æ—á–Ω–∞—è –ø–æ–±–∏—Ç–æ–≤–∞—è –∫–æ–ø–∏—è –º–∞—Å—Ç–µ—Ä–∞.__

–≠—Ç–æ—Ç –ø—Ä–æ—Å—Ç–æ –∏ —ç–∫–æ–Ω–æ–º–Ω–æ, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –≤—ã—Å–æ–∫–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤: –≤–ø–ª–æ—Ç—å –¥–æ –æ–¥–Ω–æ–π –û–° –∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π PostgreSQL, –∏ –¥–∞–∂–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.

__–ï—Å–ª–∏ master —É–ø–∞–ª, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å master –¥—Ä—É–≥—É—é —Ä–µ–ø–ª–∏–∫—É.__

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–º–∞—Å—Ç–µ—Ä/primary) –ø–∏—à–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ WAL.
2. –†–µ–ø–ª–∏–∫–∞ (standby) –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –º–∞—Å—Ç–µ—Ä—É —á–µ—Ä–µ–∑ `walreceiver` –ø—Ä–æ—Ü–µ—Å—Å.
3. –ú–∞—Å—Ç–µ—Ä —á–µ—Ä–µ–∑ `walsender` –æ—Ç—Å—ã–ª–∞–µ—Ç WAL –ª–æ–≥–∏ —Ä–µ–ø–ª–∏–∫–µ –≤ **—Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**.
4. –†–µ–ø–ª–∏–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫ —Å–≤–æ–µ–π –∫–æ–ø–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
5. –†–µ–ø–ª–∏–∫–∞ –ø—Ä–∏ —ç—Ç–æ–º **read-only**.

## –ö–∞–∫ –∏–¥—É—Ç –∑–∞–ø—Ä–æ—Å—ã?

- –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ **—á—Ç–µ–Ω–∏–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `SELECT * FROM balance WHERE user_id = 123`) –º–æ–∂–Ω–æ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Ä–µ–ø–ª–∏–∫—É.
- –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ **–∑–∞–ø–∏—Å—å** (`INSERT`, `UPDATE`, `DELETE`) –∏–¥—É—Ç **—Ç–æ–ª—å–∫–æ –Ω–∞ –º–∞—Å—Ç–µ—Ä**.
- –ù–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∏–ª–∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞) —Ç—ã **—Å–∞–º —Ä–µ—à–∞–µ—à—å, –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å**.

## –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Select –Ω–∞ –¥—Ä—É–≥–∏–µ —Ä–µ–ø–ª–∏–∫–∏

### –ß–µ—Ä–µ–∑ –∫–æ–¥
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –¥–≤–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (`master` –∏ `replica`)
- –ò—Å–ø–æ–ª—å–∑—É–µ–º `AbstractRoutingDataSource`
- –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º `DataSource` —á–µ—Ä–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é `@Transactional(readOnly = true)`
  –í–∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–≤ –∞—Å–ø–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –º–µ–Ω—è—Ç—å dataSource

## –ß–µ—Ä–µ–∑ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫
–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ **–ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å—ã** –∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –Ω–∞ –Ω—É–∂–Ω—É—é –Ω–æ–¥—É:

| –ó–∞–ø—Ä–æ—Å              | –ö—É–¥–∞ –ø–æ–π–¥—ë—Ç |
| ------------------- | ----------- |
| `SELECT ...`        | –ù–∞ —Ä–µ–ø–ª–∏–∫—É  |
| `INSERT/UPDATE/...` | –ù–∞ –º–∞—Å—Ç–µ—Ä   |

## –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è
__–ü—Ä–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å—ã —Å–Ω–∞—á–∞–ª–∞ –ø–æ–ø–∞–¥–∞—é—Ç –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä, –ø–æ—Ç–æ–º ‚Äî –≤ WAL –∏ –ª–∏—à—å –≤ –∫–æ–Ω—Ü–µ ‚Äî –Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.__

–ü–ª—é—Å—ã —Ç–∞–∫–æ–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –≤ –±—ã—Å—Ç—Ä–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ ‚Äî –≤ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ—Ç–µ—Ä—è—Ç—å —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–µ–ø–ª–∏–∫–∞—Ö –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –æ–Ω–∏ –Ω–µ —É—Å–ø–µ—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è, –µ—Å–ª–∏ —Å –º–∞—Å—Ç–µ—Ä–æ–º —á—Ç–æ-—Ç–æ —Å–ª—É—á–∏—Ç—Å—è.

## –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è
__–ü—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π ‚Äî –∑–∞–ø—Ä–æ—Å—ã –ø–æ—Å—Ç—É–ø–∞—é—Ç –≤–Ω–∞—á–∞–ª–µ –≤ WAL, –∞ —É–∂–µ –æ—Ç—Ç—É–¥–∞ ‚Äî –Ω–∞ master- –∏ slave-—Å–µ—Ä–≤–µ—Ä—ã.__
–ü–ª—é—Å—ã ‚Äî –±–æ–ª—å—à–∞—è –∑–∞—â–∏—â–µ–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö, –º–∏–Ω—É—Å—ã ‚Äî –Ω–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ slave-—Å–µ—Ä–≤–µ—Ä–µ.

## –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è vs –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è
| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞         | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è                                 | –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è                                      |
| ---------------------- | ------------------------------------------- | ----------------------------------------------- |
| –ú–µ—Ö–∞–Ω–∏–∑–º               | –ú–∞—Å—Ç–µ—Ä –ø–∏—à–µ—Ç WAL –∏ –Ω–µ –∂–¥–µ—Ç —Ä–µ–ø–ª–∏–∫—É          | –ú–∞—Å—Ç–µ—Ä –∂–¥–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç —Ä–µ–ø–ª–∏–∫–∏            |
| –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ–µ | –í–æ–∑–º–æ–∂–Ω–∞ (–µ—Å–ª–∏ —Ä–µ–ø–ª–∏–∫–∞ –Ω–µ —É—Å–ø–µ–ª–∞ –ø—Ä–∏–º–µ–Ω–∏—Ç—å) | –ù–µ—Ç –ø–æ—Ç–µ—Ä—å (—Ä–µ–ø–ª–∏–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∞ –∑–∞–ø–∏—Å—å)         |
| –ó–∞–¥–µ—Ä–∂–∫–∞               | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –º–∞—Å—Ç–µ—Ä              | –ú–∞—Å—Ç–µ—Ä –º–æ–∂–µ—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å –∏–∑-–∑–∞ —Ä–µ–ø–ª–∏–∫–∏            |
| –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å             | –ù–∏–∂–µ (–Ω–æ –±—ã—Å—Ç—Ä–µ–µ)                           | –í—ã—à–µ (–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ)                             |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∞              | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é                                | –ù–∞–¥–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ `synchronous_standby_names` |

# –õ–æ–≥–∏—á–µ—Å–∫–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è
–õ–æ–≥–∏—á–µ—Å–∫–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è PostgreSQL –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ø–∏–∏ –ë–î, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ (–∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö –±–∞–∑—ã, –∞ –Ω–µ —á–∏—Å—Ç—ã–µ –±–∏—Ç—ã –∏ –±–∞–π—Ç—ã), —á—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–µ–≤–∞–∂–Ω–æ–π —Ä–∞–∑–Ω–∏—Ü—É –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤, –≤–µ—Ä—Å–∏—è—Ö –°–£–ë–î –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö.

–õ–æ–≥–∏—á–µ—Å–∫–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ—è–≤–∏–ª–∞—Å—å –≤ PostgreSQL –≤–µ—Ä—Å–∏–∏ 10.0 –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±–æ—Ä–æ—á–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω—É–∂–Ω—ã–µ —á–∞—Å—Ç–∏ –ë–î –Ω–∞ —Ä–∞–∑–Ω—ã—Ö slave-—Å–µ—Ä–≤–µ—Ä–∞—Ö, —á—Ç–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –ø—Ä–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏. –†–∞–±–æ—Ç–∞–µ—Ç —ç—Ç–æ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É __–ø–æ–¥–ø–∏—Å–∫–∏__: –º–∞—Å—Ç–µ—Ä-—Å–µ—Ä–≤–µ—Ä –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∏–∑–¥–∞—Ç–µ–ª–µ–º, –ø—É–±–ª–∏–∫—É—é—â–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Ç–µ –∏–ª–∏ –∏–Ω—ã–µ –∏–∑ –Ω–∏—Ö.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ú–∞—Å—Ç–µ—Ä –ø–∏—à–µ—Ç WAL —Å `wal_level = logical`.
2. –¢—ã —Å–æ–∑–¥–∞—ë—à—å **–ø—É–±–ª–∏–∫–∞—Ü–∏—é** (publication) –Ω–∞ –º–∞—Å—Ç–µ—Ä–µ ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—à—å, –∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞—Ç—å.
3. –ù–∞ —Ä–µ–ø–ª–∏–∫–µ —Å–æ–∑–¥–∞–µ—à—å **–ø–æ–¥–ø–∏—Å–∫—É** (subscription) ‚Äî –∏ –¥–∞–Ω–Ω—ã–µ —Ä–µ–ø–ª–∏—Ü–∏—Ä—É—é—Ç—Å—è.


# –§–∏–∑–∏—á–µ—Å–∫–∞—è vs –õ–æ–≥–∏—á–µ—Å–∫–∞—è 

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞                     | **–§–∏–∑–∏—á–µ—Å–∫–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è**                              | **–õ–æ–≥–∏—á–µ—Å–∫–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è**                            |
| ---------------------------------- | ------------------------------------------------------ | ---------------------------------------------------- |
| üì¶ –£—Ä–æ–≤–µ–Ω—å                         | –ü–æ–±–∏—Ç–æ–≤—ã–π (–±–∞–π—Ç–æ–≤—ã–π), –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–∞–π–ª–æ–≤ –∏ –±–ª–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö | SQL-—É—Ä–æ–≤–µ–Ω—å (—Ç–∞–±–ª–∏—Ü—ã, —Å—Ç—Ä–æ–∫–∏)                        |
| üîÑ –ß—Ç–æ —Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ—Ç—Å—è               | –í—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ü–µ–ª–∏–∫–æ–º                                | –¢–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã                             |
| üìö –ü–æ–¥–¥–µ—Ä–∂–∫–∞ DDL (ALTER, CREATE)   | –†–µ–ø–ª–∏—Ü–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–æ–º (–≤–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥ –¥–∞–Ω–Ω—ã—Ö)          | **–ù–µ—Ç** ‚Äì DDL-–æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ —Ä–µ–ø–ª–∏—Ü–∏—Ä—É—é—Ç—Å—è              |
| üîÉ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ                     | –¢–æ–ª—å–∫–æ master ‚Üí standby (–æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è)                | –û–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è (master ‚Üí replica), –Ω–æ –≥–∏–±—á–µ           |
| üìñ –ß—Ç–µ–Ω–∏–µ –Ω–∞ —Ä–µ–ø–ª–∏–∫–µ               | –¢–æ–ª—å–∫–æ **read-only**                                   | –ú–æ–∂–Ω–æ **—á–∏—Ç–∞—Ç—å –∏ –ø–∏—Å–∞—Ç—å**, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å            |
| üéØ –¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞                | –ù–µ—Ç ‚Äî —Ç–æ–ª—å–∫–æ –≤—Å—è –±–∞–∑–∞                                  | –î–∞ ‚Äî –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ —Å—Ö–µ–º—ã      |
| üîÅ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã | –ù–µ—Ç ‚Äî –ø–æ–ª–Ω–∞—è –∫–æ–ø–∏—è –º–∞—Å—Ç–µ—Ä–∞                             | –î–∞, –º–æ–∂–Ω–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Å—Ö–µ–º—É                 |
| üîó –í–µ—Ä—Å–∏–∏ PostgreSQL               | –¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –≤–µ—Ä—Å–∏—è                             | –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏                     |
| üß∞ –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ             | High Availability, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —á—Ç–µ–Ω–∏–µ           | –ú–∏–≥—Ä–∞—Ü–∏–∏, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, —á–∞—Å—Ç–∏—á–Ω–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è           |
| ‚è± –ó–∞–¥–µ—Ä–∂–∫–∞                         | –û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è (–ø–æ—á—Ç–∏ real-time)                         | –ú–æ–∂–µ—Ç –±—ã—Ç—å —á—É—Ç—å –≤—ã—à–µ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±—ä–µ–º–∞)  |
| ‚ö† –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤              | –ù–µ—Ç                                                    | **–î–∞** ‚Äì –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –Ω–∞ —Ä–µ–ø–ª–∏–∫–µ      |
| üßµ –†–µ–ø–ª–∏–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–∞—Å—Ç–µ—Ä–æ–º     | –ß–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞                         | –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –¥–∞ (—Ä–µ–ø–ª–∏–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø–∏—Å—å—é)         |
| üõ† –°–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏             | –ü—Ä–æ—Å—Ç–∞—è –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏                         | –ß—É—Ç—å —Å–ª–æ–∂–Ω–µ–µ (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∏) |
